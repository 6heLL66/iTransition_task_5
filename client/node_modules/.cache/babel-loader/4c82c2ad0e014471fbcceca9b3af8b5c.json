{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/suzuya/Desktop/iTrasnsit/5/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/suzuya/Desktop/iTrasnsit/5/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"C:/Users/suzuya/Desktop/iTrasnsit/5/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/suzuya/Desktop/iTrasnsit/5/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"C:/Users/suzuya/Desktop/iTrasnsit/5/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/suzuya/Desktop/iTrasnsit/5/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import React from'react';import'./bootstrap.min.css';var MainPage=/*#__PURE__*/function(_React$Component){_inherits(MainPage,_React$Component);var _super=_createSuper(MainPage);function MainPage(props){var _this;_classCallCheck(this,MainPage);_this=_super.call(this,props);_this.state={games:[],findedGames:[],modal:\"modal fade\"};return _this;}_createClass(MainPage,[{key:\"componentDidMount\",value:function componentDidMount(){this.updateGames();if(!localStorage.getItem(\"id\")){localStorage.setItem(\"id\",\"f\".concat((+new Date()).toString(16)));}}},{key:\"getName\",value:function getName(i){return this.state.games[i].props.name;}},{key:\"updateGames\",value:function(){var _updateGames=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _this2=this;var res,games;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"/api/getGames\",{method:\"POST\"});case 2:res=_context.sent;_context.next=5;return res.json();case 5:games=_context.sent;this.state.games=[];this.state.findedGames=[];games.map(function(e,i){_this2.state.games.push(/*#__PURE__*/_jsx(Game,{getName:_this2.getName.bind(_this2),name:e.name,players:e.playersCount,number:i+1,status:e.status,tags:e.tags},i));_this2.state.findedGames.push(_this2.state.games[i]);});this.forceUpdate();case 10:case\"end\":return _context.stop();}}},_callee,this);}));function updateGames(){return _updateGames.apply(this,arguments);}return updateGames;}()},{key:\"showModal\",value:function showModal(){this.setState({modal:\"modal fade show\"});}},{key:\"hideModal\",value:function hideModal(){this.setState({modal:\"modal fade\"});}},{key:\"hideGames\",value:function hideGames(games){this.setState({findedGames:games});}},{key:\"clearCookie\",value:function clearCookie(){localStorage.clear();}},{key:\"render\",value:function render(){return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(TagsFinder,{games:this.state.games,func:this.hideGames.bind(this),flag:\"findTags\"}),/*#__PURE__*/_jsxs(\"table\",{className:\"table table-dark table-striped\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"#\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Players\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Status\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:this.state.findedGames})]}),/*#__PURE__*/_jsx(\"div\",{className:\"form-row text-center\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-outline-success\",onClick:this.showModal.bind(this),children:\"+Create New Game\"})}),/*#__PURE__*/_jsx(Modal,{fade:this.state.modal,hide:this.hideModal.bind(this)})]});}}]);return MainPage;}(React.Component);var Game=/*#__PURE__*/function(_React$Component2){_inherits(Game,_React$Component2);var _super2=_createSuper(Game);function Game(props){_classCallCheck(this,Game);return _super2.call(this,props);}_createClass(Game,[{key:\"connectToGame\",value:function connectToGame(e){window.location.href=\"/game/\"+this.props.getName(this.props.number-1);}},{key:\"render\",value:function render(){return/*#__PURE__*/_jsxs(\"tr\",{style:{cursor:'pointer'},onClick:this.connectToGame.bind(this),children:[/*#__PURE__*/_jsx(\"th\",{scope:\"row\",children:this.props.number}),/*#__PURE__*/_jsx(\"td\",{children:this.props.name}),/*#__PURE__*/_jsx(\"td\",{children:this.props.players+\"/2\"}),/*#__PURE__*/_jsx(\"td\",{children:this.props.status})]});}}]);return Game;}(React.Component);var TagsFinder=/*#__PURE__*/function(_React$Component3){_inherits(TagsFinder,_React$Component3);var _super3=_createSuper(TagsFinder);function TagsFinder(props){_classCallCheck(this,TagsFinder);return _super3.call(this,props);}_createClass(TagsFinder,[{key:\"find\",value:function find(e){var text=e.target.value.split(\" \");if(this.props.flag===\"findTags\"){var result=[];var games=this.props.games;for(var i=0;i<games.length;i++){var da=false;for(var j=0;j<games[i].props.tags.length;j++){for(var k=0;k<text.length;k++){if(text[k]===games[i].props.tags[j])da=true;}}if(da)result.push(games[i]);}if(e.target.value===\"\")this.props.func(games);else this.props.func(result);}else if(this.props.flag===\"setTags\"){this.props.func(text);}}},{key:\"render\",value:function render(){return/*#__PURE__*/_jsx(\"input\",{className:\"form-control mb-2 mt-2\",style:{width:'30%',minWidth:'120px'},placeholder:\"Type tags...\",autocomplete:\"on\",onInput:this.find.bind(this)});}}]);return TagsFinder;}(React.Component);var Modal=/*#__PURE__*/function(_React$Component4){_inherits(Modal,_React$Component4);var _super4=_createSuper(Modal);function Modal(props){var _this3;_classCallCheck(this,Modal);_this3=_super4.call(this,props);_this3.state={name:\"\",tags:[]};return _this3;}_createClass(Modal,[{key:\"changeHandler\",value:function changeHandler(e){this.state.name=e.target.value;}},{key:\"updateTags\",value:function updateTags(tags){this.setState({tags:tags});}},{key:\"createGame\",value:function(){var _createGame=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var game,res;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:game={name:this.state.name,playersCount:\"0\",players:{x:\"\",o:\"\"},score:[0,0],status:\"waiting\",turn:\"x\",state:[[\"-\",\"-\",\"-\"],[\"-\",\"-\",\"-\"],[\"-\",\"-\",\"-\"]],continue:[],tags:this.state.tags};_context2.next=3;return fetch('/api/createGame',{method:\"POST\",body:JSON.stringify(game),headers:{'Content-Type':'application/json'}});case 3:res=_context2.sent;_context2.t0=console;_context2.next=7;return res.json();case 7:_context2.t1=_context2.sent;_context2.t0.log.call(_context2.t0,_context2.t1);window.location.href=\"/game/\"+game.name;case 10:case\"end\":return _context2.stop();}}},_callee2,this);}));function createGame(){return _createGame.apply(this,arguments);}return createGame;}()},{key:\"render\",value:function render(){return/*#__PURE__*/_jsx(\"div\",{className:this.props.fade,id:\"exampleModal\",style:{display:this.props.fade===\"modal fade\"?\"none\":\"block\"},children:/*#__PURE__*/_jsx(\"div\",{className:\"modal-dialog\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-header\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"modal-title\",id:\"exampleModalLabel\",children:\"Create New Game\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-close\",\"aria-label\":\"Close\",onClick:this.props.hide})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-body\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Name:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",placeholder:\"game's name\",onInput:this.changeHandler.bind(this)}),/*#__PURE__*/_jsx(TagsFinder,{games:[],func:this.updateTags.bind(this),flag:\"setTags\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"form-row text-center\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary mb-2\",onClick:this.createGame.bind(this),children:\"Create Game\"})})]})})});}}]);return Modal;}(React.Component);export default MainPage;","map":{"version":3,"sources":["C:/Users/suzuya/Desktop/iTrasnsit/5/client/src/MainPage.js"],"names":["React","MainPage","props","state","games","findedGames","modal","updateGames","localStorage","getItem","setItem","Date","toString","i","name","fetch","method","res","json","map","e","push","getName","bind","playersCount","status","tags","forceUpdate","setState","clear","hideGames","showModal","hideModal","Component","Game","window","location","href","number","cursor","connectToGame","players","TagsFinder","text","target","value","split","flag","result","length","da","j","k","func","width","minWidth","find","Modal","game","x","o","score","turn","continue","body","JSON","stringify","headers","console","log","fade","display","hide","changeHandler","updateTags","createGame"],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport './bootstrap.min.css'\r\n\r\nclass MainPage extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props)\r\n\t\tthis.state = {\r\n\t\t\tgames: [],\r\n\t\t\tfindedGames: [],\r\n\t\t\tmodal: \"modal fade\"\r\n\t\t}\r\n\t}\r\n\tcomponentDidMount() {\r\n\t\tthis.updateGames()\r\n\t\tif (!localStorage.getItem(\"id\")){\r\n\t\t\tlocalStorage.setItem(\"id\", `f${(+new Date).toString(16)}`)\r\n\t\t}\r\n\t}\r\n\tgetName(i) {\r\n\t\treturn this.state.games[i].props.name\r\n\t}\r\n\tasync updateGames() {\r\n\t\tlet res = await fetch(\"/api/getGames\", { method: \"POST\" })\r\n\t\tlet games = await res.json()\r\n\t\tthis.state.games = []\r\n\t\tthis.state.findedGames = []\r\n\t\tgames.map((e, i) => {\r\n\t\t\tthis.state.games.push(<Game key={i} getName={this.getName.bind(this)}\r\n\t\t\t\t\t\t\t\t\tname={e.name} players={e.playersCount} \r\n\t\t\t\t\t\t\t\t\tnumber={i + 1} status={e.status} tags = {e.tags} />)\r\n\t\t\tthis.state.findedGames.push(this.state.games[i])\r\n\t\t})\r\n\t\tthis.forceUpdate()\r\n\t}\r\n\tshowModal() {\r\n\t\tthis.setState({ modal: \"modal fade show\" })\r\n\t}\r\n\thideModal() {\r\n\t\tthis.setState({ modal: \"modal fade\" })\r\n\t}\r\n\thideGames(games) {\r\n\t\tthis.setState({ findedGames: games })\r\n\t}\r\n\tclearCookie() {\r\n\t\tlocalStorage.clear()\r\n\t}\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"container\">\r\n\t\t\t\t<TagsFinder games={this.state.games} func={this.hideGames.bind(this)} flag={\"findTags\"} />\r\n\t\t\t\t<table className=\"table table-dark table-striped\">\r\n\t\t\t\t\t<thead>\r\n\t\t\t\t    \t<tr>\r\n\t\t\t\t      \t\t<th scope=\"col\">#</th>\r\n\t\t\t\t      \t\t<th scope=\"col\">Name</th>\r\n\t\t\t\t      \t\t<th scope=\"col\">Players</th>\r\n\t\t\t\t      \t\t<th scope=\"col\">Status</th>\r\n\t\t\t\t    \t</tr>\r\n\t\t\t\t  \t</thead>\r\n\t\t\t\t  \t<tbody>\r\n\t\t\t\t \t\t{this.state.findedGames}\r\n\t\t\t\t  \t</tbody>\r\n\t\t\t\t</table>\r\n\t\t\t\t<div className=\"form-row text-center\">\r\n\t    \t\t\t<button className=\"btn btn-outline-success\" onClick={this.showModal.bind(this)}>+Create New Game</button>\r\n\t \t\t\t</div>\r\n\t \t\t\t<Modal fade={this.state.modal} hide={this.hideModal.bind(this)} />\r\n\t \t\t\t{/*<button className=\"btn btn-primary\" onClick={this.clearCookie}>Clear Cookie</button>*/}\r\n \t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nclass Game extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props)\r\n\t}\r\n\tconnectToGame(e) {\r\n\t\twindow.location.href = \"/game/\" + this.props.getName(this.props.number - 1)\r\n\t}\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<tr style={{ cursor: 'pointer' }} onClick={this.connectToGame.bind(this)}>\r\n\t\t\t   \t<th scope=\"row\">{this.props.number}</th>\r\n\t\t\t    <td>{this.props.name}</td>\r\n\t\t\t    <td>{this.props.players + \"/2\"}</td>\r\n\t\t\t    <td>{this.props.status}</td>\r\n\t\t\t</tr>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nclass TagsFinder extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props)\r\n\t}\r\n\tfind(e) {\r\n\t\tlet text = e.target.value.split(\" \")\r\n\t\tif (this.props.flag === \"findTags\") {\r\n\t\t\tlet result = []\r\n\t\t\tlet games = this.props.games\r\n\t\t\tfor (let i = 0 ; i < games.length; i++) {\r\n\t\t\t\tlet da = false\r\n\t\t\t\tfor (let j = 0; j < games[i].props.tags.length; j++) {\r\n\t\t\t\t\tfor (let k = 0; k < text.length; k++) if (text[k] === games[i].props.tags[j]) da = true\r\n\t\t\t\t}\r\n\t\t\t\tif (da) result.push(games[i])\r\n\t\t\t}\r\n\t\tif (e.target.value === \"\") this.props.func(games)\r\n\t\telse this.props.func(result)\r\n\t\t}\r\n\t\telse if (this.props.flag === \"setTags\") {\r\n\t\t\tthis.props.func(text)\r\n\t\t}\r\n\t}\r\n\trender() {\r\n\t\treturn ( <input \tclassName=\"form-control mb-2 mt-2\" \r\n\t\t\t\t\t\tstyle={{ width: '30%', minWidth: '120px'}} \r\n\t\t\t\t\t\tplaceholder=\"Type tags...\" autocomplete=\"on\" onInput={this.find.bind(this)} /> )\r\n\t}\r\n}\r\n\r\nclass Modal extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props)\r\n\t\tthis.state = {\r\n\t\t\tname: \"\",\r\n\t\t\ttags: []\r\n\t\t}\r\n\t}\r\n\tchangeHandler(e) {\r\n\t\tthis.state.name = e.target.value\r\n\t}\r\n\tupdateTags(tags) {\r\n\t\tthis.setState({ tags: tags })\r\n\t}\r\n\tasync createGame() {\r\n\t\tconst game = {\r\n\t\t\tname: this.state.name,\r\n\t\t\tplayersCount: \"0\",\r\n\t\t\tplayers: { x: \"\", o: \"\"},\r\n\t\t\tscore: [0, 0],\r\n\t\t\tstatus: \"waiting\",\r\n\t\t\tturn: \"x\",\r\n\t\t\tstate: [\r\n\t\t\t\t[\"-\", \"-\", \"-\"],\r\n\t\t\t\t[\"-\", \"-\", \"-\"],\r\n\t\t\t\t[\"-\", \"-\", \"-\"]\r\n\t\t\t],\r\n\t\t\tcontinue: [],\r\n\t\t\ttags: this.state.tags\r\n\t\t}\r\n\t\tlet res = await fetch('/api/createGame', {\r\n\t\t\tmethod: \"POST\",\r\n\t\t\tbody: JSON.stringify(game),\r\n\t\t\theaders: {'Content-Type': 'application/json'}\r\n\t\t})\r\n\t\tconsole.log(await res.json())\r\n\t\twindow.location.href = \"/game/\" + game.name\r\n\t}\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className={this.props.fade} id=\"exampleModal\" style={{ display: this.props.fade === \"modal fade\" ? \"none\" : \"block\"}}> \r\n  \t\t\t\t<div className=\"modal-dialog\">\r\n    \t\t\t\t<div className=\"modal-content\">\r\n      \t\t\t\t\t<div className=\"modal-header\">\r\n        \t\t\t\t\t<h5 className=\"modal-title\" id=\"exampleModalLabel\">Create New Game</h5>\r\n        \t\t\t\t\t<button className=\"btn-close\" aria-label=\"Close\" onClick={this.props.hide}></button>\r\n      \t\t\t\t\t</div>\r\n      \t\t\t\t\t<div className=\"modal-body\">\r\n      \t\t\t\t\t\t<label>Name:</label>\r\n        \t\t\t\t\t<input type=\"text\" className=\"form-control\" placeholder=\"game's name\" onInput={this.changeHandler.bind(this)} />\r\n        \t\t\t\t\t<TagsFinder games={[]} func={this.updateTags.bind(this)} flag={\"setTags\"}/>\r\n      \t\t\t\t\t</div>\r\n      \t\t\t\t\t<div className=\"form-row text-center\">\r\n        \t\t\t\t\t<button className=\"btn btn-primary mb-2\" onClick={this.createGame.bind(this)}>Create Game</button>\r\n      \t\t\t\t\t</div>\r\n    \t\t\t\t</div>\r\n  \t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nexport default MainPage"]},"metadata":{},"sourceType":"module"}